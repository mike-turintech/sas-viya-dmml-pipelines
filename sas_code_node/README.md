## Summary

The **sas_code_node** folder contains example pipelines and materials for using Model Studio's SAS Code node.

In Model Studio, the SAS Code node is a Miscellaneous node that enables you to incorporate new or existing SAS code into Model Studio pipelines. This node can subsequently be moved to the Supervised Learning group if the model built in the node needs to be assessed and compared with other models in the pipeline using the Model Comparison node. When moving the node to Supervised Learning group, ensure that the required predicted variable or posterior probabilities necessary for model assessment are generated by the score code. For convenience, a large [list of macros and macro variables](https://go.documentation.sas.com/?cdcId=vdmmlcdc&cdcVersion=8.5&docsetId=vdmmlref&docsetTarget=n1jewxtohvdh8vn15m6rzkndovvu.htm&locale=en) are made available to the user in the SAS Code node editor.

Below are the list of examples; they are listed in the order of increasing complexity:
1. **subset_data:** Subsetting or filtering data 
2. **plot_samples:** Creating plots using the %dmcas_report macro
3. **reverse_filter:** Reversing the outlier filter created by the Anomaly Detection node so that outliers are analyzed instead of being excluded
4. **log_transform_for_skewed_inputs:** Setting the transformation for skewed variables to Log in the metadata, to be used by a subsequent Transformations node
5. **proc_samples:** Sample code that shows how to run SAS procedures and CAS actions
6. **cluster_profiling:** Profiling clusters or segments created in a predecessor Clustering node
7. **class_level_indicators:** Creating class level indicators also called one-hot or dummy encoding for class/categorical inputs
8. **access_data_from_predecessor:** Accessing registered data from the previous node.
9. **economic_capital_modeling:** This is an atypical example of implementing a generic workflow consisting of only SAS Code nodes, which estimate and simulate various econometrics models to solve the problem of economic capital modeling

### Important Notes
- The exported data that is produced by a successful SAS Code node run can be used by subsequent nodes in a pipeline when the corresponding score code is written to a file referenced by the **dm_file_scorecode** macro variable in the Training Code pane, or the score code is entered into the Scoring Code pane. See subset_data, reverse_filter and others for examples.
- The SAS Code node needs to be moved to Supervised Learning group when building a predictive model. This step is required when the model needs to be assessed and compared with other models (using Model Comparison node) in the pipeline. As mentioned earlier, the model score code needs to be written to a file referenced by **dm_file_scorecode** macro variable if it generates the data step code or to **dm_data_rstore** macro variable if it generates an astore (or analytic store). See proc_samples/proc_logselect.sas and proc_samples/proc_gradboost.sas for examples.
- The **dmcas_metaChange** macro can be used to modify the metadata (like variable roles and levels) in the SAS Code node. See subset_data and reverse_filter for examples.
- The **dmcas_report** macro can be used to add reports to the SAS Code node results. See examples in plot_samples, proc_samples, and cluster_profiling.

### Additional resources
- [SAS Viya: Machine Learning Reference Help: SAS Code node](https://go.documentation.sas.com/doc/en/capcdc/v_018/vdmmlcdc/vdmmlref/n0k0fj96e81iton142bnbqg0igiv.htm)
